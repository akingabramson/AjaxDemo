<div id="secrets-list"></div>
<div id="secret-form">
  <input type="text" id="secret-text-field"></input>
  <button id="submit-secret">Submit!</button>
</div>

<script type="text/javascript">
  $(function () {
    var secretsListEl = $('#secrets-list');

    var secretsView = new SS.SecretsView(
      secretsListEl,
      function () { SS.Secret.fetchAll(); }
    );
    // Re-render view on each saved secret
    SS.Secret.saveCallbacks.push(function () {
      console.log("HERE");
      secretsView.render();
    });
    SS.Secret.fetchAll(
      function () { secretsView.render(); }
    );

    var secretTextFieldEl = $('#secret-text-field');
    var submitButtonEl = $('#submit-secret');
    var secretFormView = new SS.SecretFormView(
      secretTextFieldEl,
      submitButtonEl,
      function (newSecret) {
        newSecret.save();
      }
    ).bind();
  });
</script>
